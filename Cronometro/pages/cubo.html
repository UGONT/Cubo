<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Cubo Rubik 3D con WebSocket</title>
<script type="module" src="https://cdn.cubing.net/v0/js/cubing/twisty"></script>
<style>
body { display:flex; flex-direction:column; align-items:center; justify-content:center; min-height:100vh; background:#111; color:#fff; }
twisty-player { width:400px; height:400px; }
button { margin:4px; padding:8px 16px; border-radius:8px; border:none; background:#333; color:white; cursor:pointer; }
button:hover { background:#555; }
</style>
</head>
<body>
<h1>Cubo Rubik 3D</h1>

<twisty-player
    id="player"
    puzzle="3x3x3"
    hint-facelets="none"
    background="checkered"
    control-panel="none"
    tempo-scale="20">
</twisty-player>

<div>
    <button onclick="resetCubo()">Reset</button>
</div>

<script>
const playerEl = document.getElementById("player");
let algHistory = "";

// FunciÃ³n para mover el cubo
function moverCubo(moves) {
    if (!moves) return;
    algHistory = (algHistory + " " + moves).trim();
    playerEl.setAttribute("alg", algHistory);
    playerEl.play?.();
}

// Resetear cubo
function resetCubo() {
    algHistory = "";
    playerEl.setAttribute("alg", "");
}

// Conectar WebSocket
const socket = new WebSocket("ws://127.0.0.1:8765");


socket.onopen = () => {
    console.log("Conectado al servidor WebSocket");
};

socket.onmessage = (event) => {
    const move = event.data;
    console.log("Recibido movimiento:", move);
    moverCubo(move);
};

socket.onclose = () => console.log("Desconectado del WebSocket");
socket.onerror = (err) => console.error("WebSocket error:", err);
</script>
</body>
</html>
